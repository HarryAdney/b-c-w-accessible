document.addEventListener("astro:page-load",()=>{const l=document.querySelector("#main-navigation"),w=l?.querySelector("ul"),f=[...document.querySelectorAll(".has-dropdown button")],b=()=>{if(!l)return;const e=l.querySelectorAll("nav > ul"),t=window.location.pathname;e.forEach(r=>{[...r.querySelectorAll('a:not([rel*="external"])')].forEach(n=>{(t.includes(n.pathname.replaceAll("/",""))&&n.textContent!=="Home"||n.textContent==="Home"&&t==="/")&&(n.classList.add("is-active"),n.setAttribute("aria-current","page"))})})},h=()=>{if(!l)return;const e=l.getBoundingClientRect().width,t=document.querySelector(".desktop-menu");if(!t)return;const r=t.getBoundingClientRect().width,n=Math.round(r)+300;n>=e?(l.classList.remove("is-desktop"),l.classList.add("is-mobile")):n<=e&&(l.classList.add("is-desktop"),l.classList.remove("is-mobile"))},L=e=>e.getBoundingClientRect().right>(window.innerWidth||document.documentElement.clientWidth),A=e=>{const t=e.parentNode.querySelector("ul");e.classList.add("show"),e.setAttribute("aria-expanded","true"),L(t)&&(t.style.left="auto")},p=e=>{e.classList.remove("show"),e.setAttribute("aria-expanded","false")},g=()=>{for(let e=0;e<f.length;e++)p(f[e])},M=e=>{e.target.getAttribute("aria-expanded")==="false"?(g(),A(e.target)):p(e.target)};w&&w.addEventListener("keydown",e=>{const t=e.target,r=t.closest("li"),s=[...w.querySelectorAll(".menu-item")],n=t.closest(".has-dropdown button"),u=t.closest(".has-dropdown li"),m=r?s.findIndex(c=>c===r):-1,d=e.key;let i;if(d==="ArrowRight"&&(r&&s.indexOf(r)===s.length-1?i=s[0]:m!==-1&&(i=s[m+1])),d==="ArrowLeft"&&(r&&s.indexOf(r)===0?i=s[s.length-1]:m!==-1&&(i=s[m-1])),d==="Escape"&&(i=s[0]),n){const o=n.nextElementSibling?.querySelector("li");d==="ArrowDown"&&(e.preventDefault(),A(n),o&&(i=o)),d==="Escape"&&p(n)}if(u){const c=u.parentNode;if(c){const o=[...c.querySelectorAll("li")],x=o.findIndex(a=>a===u);if(d==="ArrowDown"&&(e.preventDefault(),o.indexOf(u)===o.length-1?i=o[0]:i=o[x+1]),d==="ArrowUp"&&(e.preventDefault(),o.indexOf(u)===0?i=o[o.length-1]:i=o[x-1]),d==="Escape"){const a=c.previousElementSibling;if(a){const E=a.parentNode;E&&(i=E),g()}}if(d==="Tab"){const a=c.previousElementSibling;a&&o.indexOf(u)===o.length-1&&p(a)}}}if(i){const c=i.querySelector("a, button, input");c&&c.focus()}}),f&&f.forEach(e=>{e.addEventListener("click",M)}),b(),h(),window.addEventListener("resize",h),window.addEventListener("click",e=>{const t=e.target;!t.hasAttribute("aria-haspopup")&&!t.classList.contains("submenu-item")&&g()})});
